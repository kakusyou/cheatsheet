# find

## 功能

在文件系统中查找任意文件。

可以指定复杂的查找条件，还可以对结果文件执行自定义的动作。
根据文件名查找时进行**全字匹配**，需要注意通配符写法。

## 示例

```bash
find . -name '*.txt'
```

查找*.txt。

```bash
find . -type d
```

查找所有目录。

```bash
find . -path "./sr*sc"
```

查找路径为./sr*sc的文件，路径分隔符也可以被通配符匹配。

```bash
find . -name '*.txt' -exec rm -f {} \;
```

将查找到的文件删除。
`{}`代表查找到的结果，`;`是命令结束定界符，需转义防止被shell预处理。

```bash
find . -name '*.txt' -size 1M -exec ls -l {} \;
```

查找名为*.txt且空间占用为1M的文件。
3.txt大小只有1k，也被查找出，是因为-size匹配的是占用空间大小，而非文件大小。

## 查找条件

`find`支持多种查找条件，有些条件还附带参数。
当参数为数值`n`时，可加前缀`+`或`-`，分别表示大于或小于`n`，无前缀则表示等于`n`。

常用条件如下：

+ **-[i]name pattern**: 文件名符合pattern通配模式，i表示不区分大小写
+ **-[i]path pattern**: 文件路径符合pattern统配模式，i表示不区分大小写
+ **-[i]regex pattern**: 文件名符合pattern正则表达式，i表示不区分大小写
+ **-regextype**: `-regex`所使用的正则表达式的类型，可用值为：
    - *emacs*: 默认值
    - *posix-awk*
    - *posix-basic*
    - *posix-egrep*
    - *posix-extended*
+ **-type c**: 文件为指定类型
    - *b*: 块设备文件
    - *c*: 字符设备文件
    - *d*: 目录
    - *p*: 命令管道
    - *f*: 普通文件
    - *l*: 符号链接
    - *s*: socket文件
+ **-size [+-]n[cwbkMG]**: 文件所占用空间（非文件本身大小）
    - *b*: 512byte，默认单位
    - *c*: 字节
    - *w*: 双字节
    - *k*: 1024字节
    - *M*: 1024k
    - *G*: 1024M
+ **-newer file**: 文件修改时间比file新
+ **-mmin [+-]n**: 文件内容n分钟前被修改过
+ **-mtime [+-]n**: 文件内容n*24小时前被修改过
+ **-used [+-]n**: 文件状态改变n天后被访问过的文件
+ **-amin [+-]n**: 文件n分钟之前被访问过
+ **-cmin [+-]n**: 文件状态n分钟前被改变过
+ **-anewer file**: file被修改后该文件被访问过
+ **-atime [+-]n**: 文件n*24小时之前被访问过
+ **-cnewer file**: file被修改后该文件状态改变过
+ **-ctime [+-]n**: 文件状态n*24小时之前改变过
+ **-empty**: 空的普通文件或目录
+ **-executable**: 文件或目录具有x权限
+ **-user uname**: 文件属于指定用户
+ **-samefile name**: 文件是name的硬链接
+ **-inum [+-]n**: 文件inode数为n
+ **-perm [-/]mode**: 文件符合指定权限，前缀含义如下：
    - *-*: 实际权限包含mode中所有位
    - */*: 实际权限包含mode中任意位
    - *无前缀*: 实际权限与mode相等
+ **-mount**: 如果子目录挂载了其它文件系统，则不进入。

## 条件组合

同时指定多个条件时，默认是与的关系。还可以用逻辑运算符来连接多个条件，并通过括号改变运算优先级。

+ **expr1 -o expr2**: 或运算
+ **! expr**: 取反
+ **expr1, expr2**: 列表，从左到右估值，expr2结果为最终值
+ **( expr1 -o expr2 ) expr3**: 显示指定优先级，`()`是特殊字符，使用时一般需转义

## 自定义动作

可以对查找到的文件执行自定义的动作，如删除文件，或执行自定义的命令。

+ **-delete**: 删除查找到的文件
+ **-exec cmd ;**: 对查找到的每个文件调用一次cmd命令，`;`表示命令结束，使用时一般需转义。
+ **-exec cmd {} ;**: 同上，`{}`是占位符，代表查找结果文件
+ **-exec cmd {} +**: 将查找到的所有文件名用空格连接，调用一次cmd，`{} +`必须写在最后
+ **-execdir**: 同exec系列，只是以查找结果文件所在目录为工作目录执行cmd
